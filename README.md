# System Design социальной сети для курса по System Design

Функциональные требования:
1. публикация постов из путешествий с фотографиями, небольшим описанием и привязкой к конкретному месту путешествия
2. оценка и комментарии постов других путешественников
3. подписка на других путешественников, чтобы следить за их активностью
4. поиск популярных мест для путешествий и просмотр постов с этих мест
5. просмотр ленты других путешественников и ленты пользователя, основанной на подписках в обратном хронологическом порядке

Нефункциональные требования:
1. DAU 10 000 000 
2. Доступность 99,9%
3. активности пользователей (в сутки):
    * публикация постов: 1 запрос
    * публикация фото: 10 фото на пост
    * просмотр ленты: 20 запросов, для просмотра постов других пользователей
    * реакции: 10 запросов, для оценки постов
    * комментарии: 2 запроса
4. только страны СНГ
5. Сезонности нет, но в период отпусков и праздников активность пользователей может возрастать на 15%
6. Постоянное хранение с возможностью удаления пользователем
7. должна работать на мобильных устройствах и в браузерах
8. Тайминги:
   * создание поста: 1 сек
   * загрузка ленты: 2 сек
   * поиск популярных мест: 5 сек


photo (size 300):
* id
* post_id
* url

post (size 300):
* id
* place_id
* user_id
* description
* created_at

reaction (size 30):
* id
* post_id
* user_id
* mark_id
* created_at

comment (size 300):
* id
* post_id
* user_id	
* text
* created_at

-------------------------- RPS ---------------------------
посты:
* RPS(read) = 10000000 * 20 / 100000 ~= 2000
* RPS(write) = 10000000 / 100000 ~= 100

реакции:
* RPS(read) = 10000000 * 20 / 100000 ~= 2000
* RPS(write) = 10000000 * 10 / 100000 ~= 100

комментарии:
* RPS(read) = 10000000 * 40 / 100000 ~= 4000
* RPS(write) = 10000000 * 2 / 100000 ~= 200

фото:
* RPS(read) = 10000000 * 200 / 100000 ~= 20000
* RPS(write) = 10000000 * 10 / 100000 ~= 1000

-------------------------- Traffic -----------------------
посты:
* Traffic(read) = 2000 * 300 ~= 600 KB/s
* Traffic(write) = 100 * 300 ~= 30 KB/s

реакции:
* Traffic(read) = 2000 * 30 ~= 60 KB/s
* Traffic(write) = 100 * 30 ~= 3 KB/s

комментарии:
* Traffic(read) = 4000 * 300 ~= 1200 KB/s
* Traffic(write) = 200 * 300 ~= 60 KB/s

фото:
* Traffic(read) = 20000 * 300 ~= 6000 KB/s
* Traffic(write) = 1000 * 300 ~= 300 KB/s

-------------------------- Capacity ----------------------

посты:
Capacity = 600 * 100000 * 400 = 24 TB

реакции:
Capacity = 60 * 100000 * 400 = 2.4 TB

комментарии:
Capacity = 1200 * 100000 * 400 = 48 TB

фото:
Capacity = 6000 * 100000 * 400 = 240 TB

-------------------------- HDD ---------------------------

пропускная способность: 100 mb/s
capacity: 32 TB

посты:
* кол-во: 21 disks (RPS(read+write) ~= 2100, при пропускной способности HDD 100 получаем 21 disks)
* пропускная способность: 630 KB/s => 100 mb/s = 1 disks
* capacity: 24 => 32 = 2 disks

реакции:
* кол-во: 21 disks (RPS(read+write) ~= 21000, при пропускной способности HDD 100 получаем 21 disks)
* пропускная способность: 63 KB/s => 100 mb/s = 1 disks
* capacity: 2.4 => 32 = 1 disks

комментарии:
* кол-во: 42 disks (RPS(read+write) ~= 4200, при пропускной способности HDD 100 получаем 42 disks)
* пропускная способность: 1230 KB/s => 100 mb/s = 13 disks
* capacity: 48 => 32 = 2 disks

фото:
* кол-во: 210 disks (RPS(read+write) ~= 21000, при пропускной способности HDD 100 получаем 210 disks)
* пропускная способность: 6300 KB/s => 100 mb/s = 63 disks
* capacity: 240 => 32 = 8 disks

-------------------------- SSD ---------------------------

пропускная способность: 500 mb/s
capacity: 100 TB

посты:
* кол-во: 5 disks (RPS(read+write) ~= 2100, при пропускной способности HDD 500 получаем 5 disks)
* пропускная способность: 630 KB/s => 100 mb/s = 1 disks
* capacity: 24 => 100 = 1 disks

реакции:
* кол-во: 5 disks (RPS(read+write) ~= 21000, при пропускной способности HDD 500 получаем 21 disks)
* пропускная способность: 63 KB/s => 500 mb/s = 1 disks
* capacity: 2.4 => 100 = 1 disks

комментарии:
* кол-во: 9 disks (RPS(read+write) ~= 4200, при пропускной способности HDD 500 получаем 9 disks)
* пропускная способность: 1230 KB/s => 500 mb/s = 3 disks
* capacity: 48 => 500 = 1 disks

фото:
* кол-во: 42 disks (RPS(read+write) ~= 21000, при пропускной способности HDD 500 получаем 42 disks)
* пропускная способность: 6300 KB/s => 500 mb/s = 13 disks
* capacity: 240 => 500 = 1 disks

для использования выбираю SSD
